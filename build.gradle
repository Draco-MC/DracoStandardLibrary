buildscript {
    repositories {
        maven {
            url "https://repo.spongepowered.org/repository/maven-public/"
        }
    }
    dependencies {
        classpath "org.spongepowered:vanillagradle:0.2.1-SNAPSHOT"
    }
}

plugins {
    id "org.jetbrains.kotlin.jvm" version "1.7.20"
    id "maven-publish"
}

apply plugin: "org.spongepowered.gradle.vanilla"
apply plugin: 'kotlin'

group 'sh.talonfox'
version = "1.0.0-1.19.2-SNAPSHOT"

repositories {
    mavenCentral()
    maven { url = "https://repo.spongepowered.org/maven/" }
    maven { url = "https://maven.minecraftforge.net/" }
    maven { url = "https://maven.enaium.cn" }
}

dependencies {
    implementation 'sh.talonfox:vulpesloader:0.1.0-SNAPSHOT'
}

test {
    useJUnitPlatform()
}

minecraft {
    latestRelease()
    runs {
        server {
            mainClass("net.minecraft.launchwrapper.Launch")
            args('--tweakClass','sh.talonfox.vulpesloader.bootstrap.MinecraftServerBootstrap')
        }
        client {
            mainClass("net.minecraft.launchwrapper.Launch")
            args('--tweakClass','sh.talonfox.vulpesloader.bootstrap.MinecraftClientBootstrap')
        }
    }
}

publishing {
    repositories {
        maven {
            name = "GitHubPackages"
            url = uri("https://maven.pkg.github.com/VulpesMC/VulpesStandardLibrary")
            credentials {
                username = "Talon396"
                password = project.findProperty("gpr.key") ?: System.getenv("TOKEN")
            }
        }
    }
    publications {
        gpr(MavenPublication) {
            groupId 'sh.talonfox'
            artifactId 'vulpes_std'
            from(components.java)
        }
    }
}